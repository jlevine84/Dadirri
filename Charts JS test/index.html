<!doctype html>
<html lang="en">
  <head>

  <!-- linkages to bootstrap, jquery, charts.js, ajax-------------------------------------------------------------------->
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <title>Polling Results</title>
  </head>

<!-- HTML body ------------------------------------------------------------------------------------------------------------>
  <body>
    <h1>Polling Results<button class="btn btn-success" onclick="updateChart()">Update</button></h1>

  <!-- Charts.js requires a canvas style container to hold charts. Need to create an empty canvas div -->
    <canvas id="myChart"></canvas>

<!-- Javascript for taking in the data and building the chart -------------------------------------------------------------->
  <script>

    let data = [] // will need to define a data variable capturing the subtotals of all poll responses in an array. This variable will feed into the chart build
    let labels = [] //will need to define a lables variable capturing each of the response options in an array. These will feed into the chart build.

    var ctx = document.getElementById('myChart').getContext('2d');

    window.chartColors = {    // Legend colors
                  red: 'rgb(255, 99, 132)',
                  orange: 'rgb(255, 159, 64)',
                  yellow: 'rgb(255, 205, 86)',
                  green: 'rgb(75, 192, 192)',
                  blue: 'rgb(54, 162, 235)',
                  purple: 'rgb(153, 102, 255)',
                  grey: 'rgb(201, 203, 207)',
                  teal: 'rgb(0,128,128)' ,
                  pink: 'rgb(255,0,255)',
                  lightBlue: 'rgb(0,255,255)', 
                  white: 'rgb(255, 255, 255)'       
              };

    var mixedChart = new Chart(ctx, {
    type: 'bar',
    data: {
        datasets: [{
            label: 'Anxiety',
            data: [10, 20, 30, 40, 5, 10, 25],
            backgroundColor: [
              window.chartColors.red,
              window.chartColors.red,
              window.chartColors.red,
              window.chartColors.red,
              window.chartColors.red,
              window.chartColors.red,
              window.chartColors.red
            ]
        }, {
            label: 'Depression',
            data: [5, 3, 38, 50, 3, 20, 5, 15],
            backgroundColor: [
              window.chartColors.blue,
              window.chartColors.blue,
              window.chartColors.blue,
              window.chartColors.blue,
              window.chartColors.blue,
              window.chartColors.blue,
              window.chartColors.blue
            ]
        }, {
            label: 'Energy',
            data: [15, 1, 50, 5, 2, 20, 14],
            backgroundColor: [
              window.chartColors.yellow,
              window.chartColors.yellow,
              window.chartColors.yellow,
              window.chartColors.yellow,
              window.chartColors.yellow,
              window.chartColors.yellow,
              window.chartColors.yellow
        ]
        }, {
            label: 'Sleep',
            data: [5, 11, 20, 10, 1, 15, 5],
            borderColor: [
            window.chartColors.green
            ],                  
            backgroundColor: window.chartColors.white,
            // Changes this dataset to become a line
            type: 'line',
    //     
        }, {
            label: 'Medication',
            data: [0, 20, 20, 0, 0, 20, 0],
            borderColor: [
            window.chartColors.pink
            ],    
            lineTension: 0,
            backgroundColor: window.chartColors.white,
            // Changes this dataset to become a line
            type: 'line'
        }, {
            label: 'Exercise',
            data: [20, 20, 0, 20, 20, 0, 20],
            borderColor: [
            window.chartColors.teal
            ],   
            lineTension: 0,
            backgroundColor: window.chartColors.white,
            // Changes this dataset to become a line
            type: 'line'
        }],
        labels: ['5/9', '5/10', '5/11', '5/12', '5/13', '5/14', '5/15']
    },
    options: {}
});


// The below function executes an update of the chart. Could be attached to an update button or triggered to run whenever new results are received
// Right now it's defined, but not attached to anything to prompt it to run
function updateChart(){
                chart.update();
            }
    </script>


    
  </body>
</html>